<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
	<title>T”Ô†</title>
	<script type="text/javascript">
	
	function initialize(){
		myNow = new Date();
		document.getElementById("test").innerHTML = getWeekNumber(2011,12,30);
	};
	
	function getWeekNumber(year, month, day){
		var u = new Date(year, month-1, day);
		
		var year=u.getFullYear();
		var week=calcWeekNumber(u);
		if(week===0){
			year-=1;
			week=calcWeekNumber(new Date(year,11,31));
		}else if(week===53){
			var lastday=(new Date(year,11,31)).getDay();
			if(lastday>0 && lastday<4){
				year+=1;
				week=1;
			}
		}
		return week;

		function calcWeekNumber(u){
			var y=u.getFullYear();
			if(y%4===0 && (y%(100)!==0 || y%(400)===0)){
				/* ‰[”N */
				var ordinaldate=[0,31,60,91,121,152,182,213,244,274,305,335];
			}else{
				/* •½”N */
				var ordinaldate=[0,31,59,90,120,151,181,212,243,273,304,334];
			}
			var d=u.getDay();
			d=(d===0?7:d);
			return Math.floor((ordinaldate[u.getMonth()]+u.getDate()-d+10)/7);
		}
	}
	</script>
</head>

<body onload="initialize();">
	¨<div id="test"></div>©
</body>

</html>
